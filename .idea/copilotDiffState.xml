<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/user/user_profile_setting.php">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/user/user_profile_setting.php" />
              <option name="originalContent" value="&lt;?php&#10;session_start();&#10;include 'layout.php';&#10;include '../Login/Login/db.php';&#10;&#10;// Check if user is logged in&#10;if (!isset($_SESSION['user_id'])) {&#10;    header(&quot;Location: ../Login/Login/login.php&quot;);&#10;    exit();&#10;}&#10;&#10;// Get user information&#10;$user_id = $_SESSION['user_id'];&#10;$query = &quot;SELECT * FROM register WHERE id = ?&quot;;&#10;$stmt = $conn-&gt;prepare($query);&#10;$stmt-&gt;bind_param(&quot;i&quot;, $user_id);&#10;$stmt-&gt;execute();&#10;$result = $stmt-&gt;get_result();&#10;$user = $result-&gt;fetch_assoc();&#10;&#10;// Handle form submission&#10;if ($_SERVER['REQUEST_METHOD'] === 'POST') {&#10;    $name = trim($_POST['name']);&#10;    $email = trim($_POST['email']);&#10;    $phone_no = trim($_POST['phone_no']);&#10;    $about = trim($_POST['about']);&#10;    $department = trim($_POST['department']);&#10;    $passout_year = trim($_POST['passout_year']);&#10;    $current_password = $_POST['current_password'];&#10;    $new_password = $_POST['new_password'];&#10;    $confirm_password = $_POST['confirm_password'];&#10;&#10;    $update_fields = [];&#10;    $types = &quot;&quot;;&#10;    $params = [];&#10;    $errors = [];&#10;&#10;    // Validation&#10;    if (empty($name)) {&#10;        $errors[] = &quot;Name is required&quot;;&#10;    }&#10;    if (empty($email) || !filter_var($email, FILTER_VALIDATE_EMAIL)) {&#10;        $errors[] = &quot;Valid email is required&quot;;&#10;    }&#10;    if (!empty($phone_no) &amp;&amp; !preg_match('/^[0-9]{10}$/', $phone_no)) {&#10;        $errors[] = &quot;Phone number must be 10 digits&quot;;&#10;    }&#10;&#10;    // Check if email is already taken by another user&#10;    if (!empty($email) &amp;&amp; $email !== $user['email']) {&#10;        $email_check = &quot;SELECT id FROM register WHERE email = ? AND id != ?&quot;;&#10;        $email_stmt = $conn-&gt;prepare($email_check);&#10;        $email_stmt-&gt;bind_param(&quot;si&quot;, $email, $user_id);&#10;        $email_stmt-&gt;execute();&#10;        if ($email_stmt-&gt;get_result()-&gt;num_rows &gt; 0) {&#10;            $errors[] = &quot;Email is already registered&quot;;&#10;        }&#10;    }&#10;&#10;    if (empty($errors)) {&#10;        // Basic info update&#10;        if (!empty($name)) {&#10;            $update_fields[] = &quot;name = ?&quot;;&#10;            $types .= &quot;s&quot;;&#10;            $params[] = $name;&#10;        }&#10;        if (!empty($email)) {&#10;            $update_fields[] = &quot;email = ?&quot;;&#10;            $types .= &quot;s&quot;;&#10;            $params[] = $email;&#10;        }&#10;        if (!empty($phone_no)) {&#10;            $update_fields[] = &quot;phone_no = ?&quot;;&#10;            $types .= &quot;s&quot;;&#10;            $params[] = $phone_no;&#10;        }&#10;        if (!empty($about)) {&#10;            $update_fields[] = &quot;about = ?&quot;;&#10;            $types .= &quot;s&quot;;&#10;            $params[] = $about;&#10;        }&#10;        if (!empty($department)) {&#10;            $update_fields[] = &quot;department = ?&quot;;&#10;            $types .= &quot;s&quot;;&#10;            $params[] = $department;&#10;        }&#10;        if (!empty($passout_year)) {&#10;            $update_fields[] = &quot;passout_year = ?&quot;;&#10;            $types .= &quot;s&quot;;&#10;            $params[] = $passout_year;&#10;        }&#10;&#10;        // Password update&#10;        if (!empty($current_password) &amp;&amp; !empty($new_password) &amp;&amp; !empty($confirm_password)) {&#10;            if ($new_password === $confirm_password) {&#10;                if (strlen($new_password) &gt;= 6) {&#10;                    // Verify current password&#10;                    if (password_verify($current_password, $user['password'])) {&#10;                        $hashed_password = password_hash($new_password, PASSWORD_DEFAULT);&#10;                        $update_fields[] = &quot;password = ?&quot;;&#10;                        $types .= &quot;s&quot;;&#10;                        $params[] = $hashed_password;&#10;                    } else {&#10;                        $errors[] = &quot;Current password is incorrect&quot;;&#10;                    }&#10;                } else {&#10;                    $errors[] = &quot;New password must be at least 6 characters long&quot;;&#10;                }&#10;            } else {&#10;                $errors[] = &quot;New passwords do not match&quot;;&#10;            }&#10;        }&#10;&#10;        // Profile picture update&#10;        if (isset($_FILES['user_image']) &amp;&amp; $_FILES['user_image']['error'] === 0) {&#10;            $allowed = ['jpg', 'jpeg', 'png', 'gif'];&#10;            $filename = $_FILES['user_image']['name'];&#10;            $filetype = strtolower(pathinfo($filename, PATHINFO_EXTENSION));&#10;&#10;            if (in_array($filetype, $allowed)) {&#10;                $temp_name = $_FILES['user_image']['tmp_name'];&#10;                $new_filename = uniqid('profile_') . '.' . $filetype;&#10;                $upload_dir = 'forms/uploads/images/';&#10;&#10;                // Create directory if it doesn't exist&#10;                if (!is_dir($upload_dir)) {&#10;                    mkdir($upload_dir, 0777, true);&#10;                }&#10;&#10;                $upload_path = $upload_dir . $new_filename;&#10;&#10;                if (move_uploaded_file($temp_name, $upload_path)) {&#10;                    $update_fields[] = &quot;user_image = ?&quot;;&#10;                    $types .= &quot;s&quot;;&#10;                    $params[] = $new_filename;&#10;                } else {&#10;                    $errors[] = &quot;Failed to upload image&quot;;&#10;                }&#10;            } else {&#10;                $errors[] = &quot;Invalid file type. Only JPG, JPEG, PNG, and GIF are allowed&quot;;&#10;            }&#10;        }&#10;&#10;        // Update database if there are changes and no errors&#10;        if (!empty($update_fields) &amp;&amp; empty($errors)) {&#10;            $params[] = $user_id;&#10;            $types .= &quot;i&quot;;&#10;&#10;            $sql = &quot;UPDATE register SET &quot; . implode(&quot;, &quot;, $update_fields) . &quot; WHERE id = ?&quot;;&#10;            $stmt = $conn-&gt;prepare($sql);&#10;            $stmt-&gt;bind_param($types, ...$params);&#10;&#10;            if ($stmt-&gt;execute()) {&#10;                $success = &quot;Profile updated successfully&quot;;&#10;                // Refresh user data&#10;                $query = &quot;SELECT * FROM register WHERE id = ?&quot;;&#10;                $stmt = $conn-&gt;prepare($query);&#10;                $stmt-&gt;bind_param(&quot;i&quot;, $user_id);&#10;                $stmt-&gt;execute();&#10;                $result = $stmt-&gt;get_result();&#10;                $user = $result-&gt;fetch_assoc();&#10;&#10;                // Update session data&#10;                $_SESSION['user_name'] = $user['name'];&#10;            } else {&#10;                $errors[] = &quot;Error updating profile&quot;;&#10;            }&#10;        }&#10;    }&#10;}&#10;?&gt;&#10;&#10;&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;en&quot;&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot;&gt;&#10;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;&#10;    &lt;title&gt;Profile Settings - IdeaNest&lt;/title&gt;&#10;    &lt;link href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot; rel=&quot;stylesheet&quot;&gt;&#10;    &lt;style&gt;&#10;        :root {&#10;            --primary-color: #6366f1;&#10;            --secondary-color: #8b5cf6;&#10;            --success-color: #10b981;&#10;            --danger-color: #ef4444;&#10;            --warning-color: #f59e0b;&#10;            --info-color: #3b82f6;&#10;            --dark-color: #1f2937;&#10;            --light-color: #f8fafc;&#10;            --white: #ffffff;&#10;            --gray-50: #f9fafb;&#10;            --gray-100: #f3f4f6;&#10;            --gray-200: #e5e7eb;&#10;            --gray-300: #d1d5db;&#10;            --gray-400: #9ca3af;&#10;            --gray-500: #6b7280;&#10;            --gray-600: #4b5563;&#10;            --gray-700: #374151;&#10;            --gray-800: #1f2937;&#10;            --gray-900: #111827;&#10;            --border-radius: 12px;&#10;            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);&#10;            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);&#10;            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);&#10;            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);&#10;            --sidebar-width: 280px;&#10;        }&#10;&#10;        * {&#10;            margin: 0;&#10;            padding: 0;&#10;            box-sizing: border-box;&#10;        }&#10;&#10;        body {&#10;            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;&#10;            background: linear-gradient(135deg, var(--gray-50) 0%, var(--gray-100) 100%);&#10;            color: var(--gray-800);&#10;            line-height: 1.6;&#10;            min-height: 100vh;&#10;        }&#10;&#10;        .main-content {&#10;            margin-left: var(--sidebar-width);&#10;            padding: 2rem;&#10;            min-height: 100vh;&#10;            transition: margin-left 0.3s ease;&#10;        }&#10;&#10;        @media (max-width: 1024px) {&#10;            .main-content {&#10;                margin-left: 0;&#10;                padding: 1rem;&#10;                padding-top: 80px;&#10;            }&#10;        }&#10;&#10;        .settings-container {&#10;            max-width: 1000px;&#10;            margin: 0 auto;&#10;            background: var(--white);&#10;            border-radius: var(--border-radius);&#10;            box-shadow: var(--shadow-xl);&#10;            overflow: hidden;&#10;        }&#10;&#10;        .settings-header {&#10;            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));&#10;            color: var(--white);&#10;            padding: 2rem;&#10;            text-align: center;&#10;        }&#10;&#10;        .settings-header h1 {&#10;            font-size: 2rem;&#10;            margin-bottom: 0.5rem;&#10;            font-weight: 700;&#10;        }&#10;&#10;        .settings-header p {&#10;            opacity: 0.9;&#10;            font-size: 1.1rem;&#10;        }&#10;&#10;        .profile-section {&#10;            padding: 2rem;&#10;            border-bottom: 1px solid var(--gray-200);&#10;            background: var(--gray-50);&#10;        }&#10;&#10;        .profile-header {&#10;            display: flex;&#10;            align-items: center;&#10;            gap: 2rem;&#10;            margin-bottom: 2rem;&#10;        }&#10;&#10;        .profile-picture-wrapper {&#10;            position: relative;&#10;        }&#10;&#10;        .profile-picture {&#10;            width: 120px;&#10;            height: 120px;&#10;            border-radius: 50%;&#10;            object-fit: cover;&#10;            border: 4px solid var(--white);&#10;            box-shadow: var(--shadow-lg);&#10;            transition: transform 0.3s ease;&#10;        }&#10;&#10;        .profile-picture:hover {&#10;            transform: scale(1.05);&#10;        }&#10;&#10;        .profile-info h2 {&#10;            margin: 0;&#10;            font-size: 1.8rem;&#10;            color: var(--gray-800);&#10;            font-weight: 700;&#10;        }&#10;&#10;        .profile-info p {&#10;            margin: 0.5rem 0 0;&#10;            color: var(--gray-600);&#10;            font-size: 1.1rem;&#10;        }&#10;&#10;        .profile-stats {&#10;            display: grid;&#10;            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));&#10;            gap: 1rem;&#10;            margin-top: 1rem;&#10;        }&#10;&#10;        .stat-item {&#10;            background: var(--white);&#10;            padding: 1rem;&#10;            border-radius: var(--border-radius);&#10;            text-align: center;&#10;            box-shadow: var(--shadow-sm);&#10;        }&#10;&#10;        .stat-number {&#10;            font-size: 1.5rem;&#10;            font-weight: 700;&#10;            color: var(--primary-color);&#10;        }&#10;&#10;        .stat-label {&#10;            color: var(--gray-600);&#10;            font-size: 0.9rem;&#10;            margin-top: 0.25rem;&#10;        }&#10;&#10;        .settings-form {&#10;            padding: 2rem;&#10;        }&#10;&#10;        .form-section {&#10;            margin-bottom: 2.5rem;&#10;        }&#10;&#10;        .section-title {&#10;            font-size: 1.4rem;&#10;            color: var(--gray-800);&#10;            margin-bottom: 1.5rem;&#10;            font-weight: 600;&#10;            display: flex;&#10;            align-items: center;&#10;            gap: 0.5rem;&#10;        }&#10;&#10;        .section-title i {&#10;            color: var(--primary-color);&#10;        }&#10;&#10;        .form-grid {&#10;            display: grid;&#10;            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));&#10;            gap: 1.5rem;&#10;        }&#10;&#10;        .form-group {&#10;            margin-bottom: 1.5rem;&#10;        }&#10;&#10;        .form-group.full-width {&#10;            grid-column: 1 / -1;&#10;        }&#10;&#10;        .form-label {&#10;            display: block;&#10;            margin-bottom: 0.5rem;&#10;            font-weight: 600;&#10;            color: var(--gray-700);&#10;            font-size: 0.95rem;&#10;        }&#10;&#10;        .form-control {&#10;            width: 100%;&#10;            padding: 0.875rem;&#10;            border: 2px solid var(--gray-300);&#10;            border-radius: var(--border-radius);&#10;            font-size: 1rem;&#10;            transition: all 0.3s ease;&#10;            background: var(--white);&#10;        }&#10;&#10;        .form-control:focus {&#10;            outline: none;&#10;            border-color: var(--primary-color);&#10;            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);&#10;            transform: translateY(-1px);&#10;        }&#10;&#10;        .form-control:hover {&#10;            border-color: var(--gray-400);&#10;        }&#10;&#10;        textarea.form-control {&#10;            resize: vertical;&#10;            min-height: 120px;&#10;        }&#10;&#10;        .upload-section {&#10;            border: 2px dashed var(--gray-300);&#10;            border-radius: var(--border-radius);&#10;            padding: 2rem;&#10;            text-align: center;&#10;            transition: all 0.3s ease;&#10;            cursor: pointer;&#10;        }&#10;&#10;        .upload-section:hover {&#10;            border-color: var(--primary-color);&#10;            background: rgba(99, 102, 241, 0.05);&#10;        }&#10;&#10;        .upload-section.dragover {&#10;            border-color: var(--primary-color);&#10;            background: rgba(99, 102, 241, 0.1);&#10;        }&#10;&#10;        .upload-icon {&#10;            font-size: 2rem;&#10;            color: var(--gray-400);&#10;            margin-bottom: 1rem;&#10;        }&#10;&#10;        .upload-text {&#10;            color: var(--gray-600);&#10;            margin-bottom: 1rem;&#10;        }&#10;&#10;        .upload-btn {&#10;            display: inline-block;&#10;            padding: 0.75rem 1.5rem;&#10;            background: var(--primary-color);&#10;            color: var(--white);&#10;            border: none;&#10;            border-radius: var(--border-radius);&#10;            cursor: pointer;&#10;            transition: all 0.3s ease;&#10;            font-weight: 600;&#10;        }&#10;&#10;        .upload-btn:hover {&#10;            background: var(--secondary-color);&#10;            transform: translateY(-2px);&#10;            box-shadow: var(--shadow-lg);&#10;        }&#10;&#10;        .upload-btn input[type=&quot;file&quot;] {&#10;            display: none;&#10;        }&#10;&#10;        .alert {&#10;            padding: 1rem 1.25rem;&#10;            border-radius: var(--border-radius);&#10;            margin-bottom: 1.5rem;&#10;            border: 1px solid transparent;&#10;            font-weight: 500;&#10;        }&#10;&#10;        .alert-success {&#10;            background: rgba(16, 185, 129, 0.1);&#10;            color: var(--success-color);&#10;            border-color: rgba(16, 185, 129, 0.2);&#10;        }&#10;&#10;        .alert-error {&#10;            background: rgba(239, 68, 68, 0.1);&#10;            color: var(--danger-color);&#10;            border-color: rgba(239, 68, 68, 0.2);&#10;        }&#10;&#10;        .alert-info {&#10;            background: rgba(59, 130, 246, 0.1);&#10;            color: var(--info-color);&#10;            border-color: rgba(59, 130, 246, 0.2);&#10;        }&#10;&#10;        .btn {&#10;            display: inline-flex;&#10;            align-items: center;&#10;            gap: 0.5rem;&#10;            padding: 0.875rem 1.75rem;&#10;            border: none;&#10;            border-radius: var(--border-radius);&#10;            font-weight: 600;&#10;            cursor: pointer;&#10;            transition: all 0.3s ease;&#10;            text-decoration: none;&#10;            font-size: 1rem;&#10;        }&#10;&#10;        .btn-primary {&#10;            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));&#10;            color: var(--white);&#10;        }&#10;&#10;        .btn-primary:hover {&#10;            transform: translateY(-2px);&#10;            box-shadow: var(--shadow-lg);&#10;        }&#10;&#10;        .btn-secondary {&#10;            background: var(--gray-600);&#10;            color: var(--white);&#10;        }&#10;&#10;        .btn-secondary:hover {&#10;            background: var(--gray-700);&#10;            transform: translateY(-2px);&#10;            box-shadow: var(--shadow-lg);&#10;        }&#10;&#10;        .form-actions {&#10;            display: flex;&#10;            gap: 1rem;&#10;            justify-content: flex-end;&#10;            margin-top: 2rem;&#10;            padding-top: 2rem;&#10;            border-top: 1px solid var(--gray-200);&#10;        }&#10;&#10;        .password-strength {&#10;            margin-top: 0.5rem;&#10;            font-size: 0.85rem;&#10;        }&#10;&#10;        .strength-bar {&#10;            height: 4px;&#10;            background: var(--gray-200);&#10;            border-radius: 2px;&#10;            margin-top: 0.25rem;&#10;            overflow: hidden;&#10;        }&#10;&#10;        .strength-fill {&#10;            height: 100%;&#10;            transition: width 0.3s ease;&#10;        }&#10;&#10;        .strength-weak { background: var(--danger-color); width: 25%; }&#10;        .strength-fair { background: var(--warning-color); width: 50%; }&#10;        .strength-good { background: var(--info-color); width: 75%; }&#10;        .strength-strong { background: var(--success-color); width: 100%; }&#10;&#10;        .input-group {&#10;            position: relative;&#10;        }&#10;&#10;        .input-group-icon {&#10;            position: absolute;&#10;            left: 1rem;&#10;            top: 50%;&#10;            transform: translateY(-50%);&#10;            color: var(--gray-400);&#10;            pointer-events: none;&#10;        }&#10;&#10;        .input-group .form-control {&#10;            padding-left: 2.75rem;&#10;        }&#10;&#10;        .toggle-password {&#10;            position: absolute;&#10;            right: 1rem;&#10;            top: 50%;&#10;            transform: translateY(-50%);&#10;            background: none;&#10;            border: none;&#10;            color: var(--gray-400);&#10;            cursor: pointer;&#10;            font-size: 1.1rem;&#10;        }&#10;&#10;        .toggle-password:hover {&#10;            color: var(--gray-600);&#10;        }&#10;&#10;        @media (max-width: 768px) {&#10;            .profile-header {&#10;                flex-direction: column;&#10;                text-align: center;&#10;                gap: 1rem;&#10;            }&#10;&#10;            .form-grid {&#10;                grid-template-columns: 1fr;&#10;            }&#10;&#10;            .form-actions {&#10;                flex-direction: column;&#10;            }&#10;&#10;            .settings-header {&#10;                padding: 1.5rem;&#10;            }&#10;&#10;            .settings-form {&#10;                padding: 1.5rem;&#10;            }&#10;&#10;            .profile-section {&#10;                padding: 1.5rem;&#10;            }&#10;        }&#10;    &lt;/style&gt;&#10;&lt;/head&gt;&#10;&lt;body&gt;&#10;&lt;div class=&quot;main-content&quot;&gt;&#10;    &lt;div class=&quot;settings-container&quot;&gt;&#10;        &lt;div class=&quot;settings-header&quot;&gt;&#10;            &lt;h1&gt;&lt;i class=&quot;fas fa-user-cog&quot;&gt;&lt;/i&gt; Profile Settings&lt;/h1&gt;&#10;            &lt;p&gt;Manage your account information and preferences&lt;/p&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;?php if (!empty($errors)): ?&gt;&#10;            &lt;div class=&quot;alert alert-error&quot;&gt;&#10;                &lt;i class=&quot;fas fa-exclamation-circle&quot;&gt;&lt;/i&gt;&#10;                &lt;ul style=&quot;margin: 0; padding-left: 1rem;&quot;&gt;&#10;                    &lt;?php foreach ($errors as $error): ?&gt;&#10;                        &lt;li&gt;&lt;?php echo htmlspecialchars($error); ?&gt;&lt;/li&gt;&#10;                    &lt;?php endforeach; ?&gt;&#10;                &lt;/ul&gt;&#10;            &lt;/div&gt;&#10;        &lt;?php endif; ?&gt;&#10;&#10;        &lt;?php if (isset($success)): ?&gt;&#10;            &lt;div class=&quot;alert alert-success&quot;&gt;&#10;                &lt;i class=&quot;fas fa-check-circle&quot;&gt;&lt;/i&gt;&#10;                &lt;?php echo htmlspecialchars($success); ?&gt;&#10;            &lt;/div&gt;&#10;        &lt;?php endif; ?&gt;&#10;&#10;        &lt;div class=&quot;profile-section&quot;&gt;&#10;            &lt;div class=&quot;profile-header&quot;&gt;&#10;                &lt;div class=&quot;profile-picture-wrapper&quot;&gt;&#10;                    &lt;img src=&quot;&lt;?php echo !empty($user['user_image']) ? 'forms/uploads/images/' . htmlspecialchars($user['user_image']) : 'https://ui-avatars.com/api/?name=' . urlencode($user['name']) . '&amp;background=6366f1&amp;color=fff&amp;size=240'; ?&gt;&quot;&#10;                         alt=&quot;Profile Picture&quot;&#10;                         class=&quot;profile-picture&quot;&#10;                         id=&quot;profilePreview&quot;&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;profile-info&quot;&gt;&#10;                    &lt;h2&gt;&lt;?php echo htmlspecialchars($user['name']); ?&gt;&lt;/h2&gt;&#10;                    &lt;p&gt;&lt;?php echo htmlspecialchars($user['email']); ?&gt;&lt;/p&gt;&#10;                    &lt;p&gt;&lt;i class=&quot;fas fa-graduation-cap&quot;&gt;&lt;/i&gt; &lt;?php echo htmlspecialchars($user['department'] ?? 'N/A'); ?&gt; - Class of &lt;?php echo htmlspecialchars($user['passout_year'] ?? 'N/A'); ?&gt;&lt;/p&gt;&#10;                    &lt;p&gt;&lt;i class=&quot;fas fa-id-badge&quot;&gt;&lt;/i&gt; &lt;?php echo htmlspecialchars($user['enrollment_number']); ?&gt;&lt;/p&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div class=&quot;profile-stats&quot;&gt;&#10;                &lt;?php&#10;                // Get user's project count&#10;                $project_count_query = &quot;SELECT COUNT(*) as count FROM projects WHERE user_id = ?&quot;;&#10;                $project_stmt = $conn-&gt;prepare($project_count_query);&#10;                $project_stmt-&gt;bind_param(&quot;i&quot;, $user_id);&#10;                $project_stmt-&gt;execute();&#10;                $project_count = $project_stmt-&gt;get_result()-&gt;fetch_assoc()['count'];&#10;&#10;                // Get user's idea count&#10;                $idea_count_query = &quot;SELECT COUNT(*) as count FROM blog WHERE er_number = ?&quot;;&#10;                $idea_stmt = $conn-&gt;prepare($idea_count_query);&#10;                $idea_stmt-&gt;bind_param(&quot;s&quot;, $user['enrollment_number']);&#10;                $idea_stmt-&gt;execute();&#10;                $idea_count = $idea_stmt-&gt;get_result()-&gt;fetch_assoc()['count'];&#10;                ?&gt;&#10;                &lt;div class=&quot;stat-item&quot;&gt;&#10;                    &lt;div class=&quot;stat-number&quot;&gt;&lt;?php echo $project_count; ?&gt;&lt;/div&gt;&#10;                    &lt;div class=&quot;stat-label&quot;&gt;Projects&lt;/div&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;stat-item&quot;&gt;&#10;                    &lt;div class=&quot;stat-number&quot;&gt;&lt;?php echo $idea_count; ?&gt;&lt;/div&gt;&#10;                    &lt;div class=&quot;stat-label&quot;&gt;Ideas&lt;/div&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;stat-item&quot;&gt;&#10;                    &lt;div class=&quot;stat-number&quot;&gt;&lt;?php echo date('Y') - $user['passout_year'] + 4; ?&gt;&lt;/div&gt;&#10;                    &lt;div class=&quot;stat-label&quot;&gt;Year&lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;form action=&quot;&quot; method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot; class=&quot;settings-form&quot;&gt;&#10;            &lt;div class=&quot;form-section&quot;&gt;&#10;                &lt;h3 class=&quot;section-title&quot;&gt;&#10;                    &lt;i class=&quot;fas fa-camera&quot;&gt;&lt;/i&gt;&#10;                    Profile Picture&#10;                &lt;/h3&gt;&#10;                &lt;div class=&quot;upload-section&quot; onclick=&quot;document.getElementById('user_image').click()&quot;&gt;&#10;                    &lt;div class=&quot;upload-icon&quot;&gt;&#10;                        &lt;i class=&quot;fas fa-cloud-upload-alt&quot;&gt;&lt;/i&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;upload-text&quot;&gt;&#10;                        Click to upload a new profile picture or drag and drop&#10;                    &lt;/div&gt;&#10;                    &lt;label class=&quot;upload-btn&quot;&gt;&#10;                        &lt;i class=&quot;fas fa-upload&quot;&gt;&lt;/i&gt; Choose Image&#10;                        &lt;input type=&quot;file&quot; name=&quot;user_image&quot; id=&quot;user_image&quot; accept=&quot;image/*&quot;&gt;&#10;                    &lt;/label&gt;&#10;                    &lt;div style=&quot;margin-top: 0.5rem; font-size: 0.85rem; color: var(--gray-500);&quot;&gt;&#10;                        Maximum file size: 5MB. Supported formats: JPG, PNG, GIF&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div class=&quot;form-section&quot;&gt;&#10;                &lt;h3 class=&quot;section-title&quot;&gt;&#10;                    &lt;i class=&quot;fas fa-user&quot;&gt;&lt;/i&gt;&#10;                    Personal Information&#10;                &lt;/h3&gt;&#10;                &lt;div class=&quot;form-grid&quot;&gt;&#10;                    &lt;div class=&quot;form-group&quot;&gt;&#10;                        &lt;label for=&quot;new_password&quot; class=&quot;form-label&quot;&gt;New Password&lt;/label&gt;&#10;                        &lt;div class=&quot;input-group&quot;&gt;&#10;                            &lt;i class=&quot;fas fa-lock input-group-icon&quot;&gt;&lt;/i&gt;&#10;                            &lt;input type=&quot;password&quot; id=&quot;new_password&quot; name=&quot;new_password&quot; class=&quot;form-control&quot;&gt;&#10;                            &lt;button type=&quot;button&quot; class=&quot;toggle-password&quot; data-target=&quot;new_password&quot;&gt;&#10;                                &lt;i class=&quot;fas fa-eye&quot;&gt;&lt;/i&gt;&#10;                            &lt;/button&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;password-strength&quot; id=&quot;passwordStrength&quot; style=&quot;display: none;&quot;&gt;&#10;                            &lt;div class=&quot;strength-bar&quot;&gt;&#10;                                &lt;div class=&quot;strength-fill&quot; id=&quot;strengthFill&quot;&gt;&lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;span id=&quot;strengthText&quot;&gt;&lt;/span&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;&#10;                    &lt;div class=&quot;form-group&quot;&gt;&#10;                        &lt;label for=&quot;confirm_password&quot; class=&quot;form-label&quot;&gt;Confirm New Password&lt;/label&gt;&#10;                        &lt;div class=&quot;input-group&quot;&gt;&#10;                            &lt;i class=&quot;fas fa-check-circle input-group-icon&quot;&gt;&lt;/i&gt;&#10;                            &lt;input type=&quot;password&quot; id=&quot;confirm_password&quot; name=&quot;confirm_password&quot; class=&quot;form-control&quot;&gt;&#10;                            &lt;button type=&quot;button&quot; class=&quot;toggle-password&quot; data-target=&quot;confirm_password&quot;&gt;&#10;                                &lt;i class=&quot;fas fa-eye&quot;&gt;&lt;/i&gt;&#10;                            &lt;/button&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div class=&quot;form-section&quot;&gt;&#10;                &lt;h3 class=&quot;section-title&quot;&gt;&#10;                    &lt;i class=&quot;fas fa-id-card&quot;&gt;&lt;/i&gt;&#10;                    Academic Information (Read Only)&#10;                &lt;/h3&gt;&#10;                &lt;div class=&quot;form-grid&quot;&gt;&#10;                    &lt;div class=&quot;form-group&quot;&gt;&#10;                        &lt;label for=&quot;enrollment_number&quot; class=&quot;form-label&quot;&gt;Enrollment Number&lt;/label&gt;&#10;                        &lt;div class=&quot;input-group&quot;&gt;&#10;                            &lt;i class=&quot;fas fa-id-badge input-group-icon&quot;&gt;&lt;/i&gt;&#10;                            &lt;input type=&quot;text&quot; id=&quot;enrollment_number&quot; class=&quot;form-control&quot;&#10;                                   value=&quot;&lt;?php echo htmlspecialchars($user['enrollment_number']); ?&gt;&quot; readonly&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;&#10;                    &lt;div class=&quot;form-group&quot;&gt;&#10;                        &lt;label for=&quot;gr_number&quot; class=&quot;form-label&quot;&gt;GR Number&lt;/label&gt;&#10;                        &lt;div class=&quot;input-group&quot;&gt;&#10;                            &lt;i class=&quot;fas fa-hashtag input-group-icon&quot;&gt;&lt;/i&gt;&#10;                            &lt;input type=&quot;text&quot; id=&quot;gr_number&quot; class=&quot;form-control&quot;&#10;                                   value=&quot;&lt;?php echo htmlspecialchars($user['gr_number']); ?&gt;&quot; readonly&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div class=&quot;form-actions&quot;&gt;&#10;                &lt;button type=&quot;button&quot; class=&quot;btn btn-secondary&quot; onclick=&quot;window.location.reload()&quot;&gt;&#10;                    &lt;i class=&quot;fas fa-undo&quot;&gt;&lt;/i&gt; Reset Changes&#10;                &lt;/button&gt;&#10;                &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;&#10;                    &lt;i class=&quot;fas fa-save&quot;&gt;&lt;/i&gt; Save Changes&#10;                &lt;/button&gt;&#10;            &lt;/div&gt;&#10;        &lt;/form&gt;&#10;    &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;script&gt;&#10;    // Profile picture preview&#10;    document.getElementById('user_image').addEventListener('change', function(e) {&#10;        if (e.target.files &amp;&amp; e.target.files[0]) {&#10;            const reader = new FileReader();&#10;            reader.onload = function(e) {&#10;                document.getElementById('profilePreview').src = e.target.result;&#10;            }&#10;            reader.readAsDataURL(e.target.files[0]);&#10;        }&#10;    });&#10;&#10;    // Drag and drop functionality&#10;    const uploadSection = document.querySelector('.upload-section');&#10;&#10;    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName =&gt; {&#10;        uploadSection.addEventListener(eventName, preventDefaults, false);&#10;    });&#10;&#10;    function preventDefaults(e) {&#10;        e.preventDefault();&#10;        e.stopPropagation();&#10;    }&#10;&#10;    ['dragenter', 'dragover'].forEach(eventName =&gt; {&#10;        uploadSection.addEventListener(eventName, highlight, false);&#10;    });&#10;&#10;    ['dragleave', 'drop'].forEach(eventName =&gt; {&#10;        uploadSection.addEventListener(eventName, unhighlight, false);&#10;    });&#10;&#10;    function highlight(e) {&#10;        uploadSection.classList.add('dragover');&#10;    }&#10;&#10;    function unhighlight(e) {&#10;        uploadSection.classList.remove('dragover');&#10;    }&#10;&#10;    uploadSection.addEventListener('drop', handleDrop, false);&#10;&#10;    function handleDrop(e) {&#10;        const dt = e.dataTransfer;&#10;        const files = dt.files;&#10;&#10;        if (files.length &gt; 0) {&#10;            document.getElementById('user_image').files = files;&#10;            // Trigger change event&#10;            const event = new Event('change');&#10;            document.getElementById('user_image').dispatchEvent(event);&#10;        }&#10;    }&#10;&#10;    // Password toggle functionality&#10;    document.querySelectorAll('.toggle-password').forEach(button =&gt; {&#10;        button.addEventListener('click', function() {&#10;            const targetId = this.getAttribute('data-target');&#10;            const targetInput = document.getElementById(targetId);&#10;            const icon = this.querySelector('i');&#10;&#10;            if (targetInput.type === 'password') {&#10;                targetInput.type = 'text';&#10;                icon.classList.remove('fa-eye');&#10;                icon.classList.add('fa-eye-slash');&#10;            } else {&#10;                targetInput.type = 'password';&#10;                icon.classList.remove('fa-eye-slash');&#10;                icon.classList.add('fa-eye');&#10;            }&#10;        });&#10;    });&#10;&#10;    // Password strength checker&#10;    document.getElementById('new_password').addEventListener('input', function() {&#10;        const password = this.value;&#10;        const strengthDiv = document.getElementById('passwordStrength');&#10;        const strengthFill = document.getElementById('strengthFill');&#10;        const strengthText = document.getElementById('strengthText');&#10;&#10;        if (password.length === 0) {&#10;            strengthDiv.style.display = 'none';&#10;            return;&#10;        }&#10;&#10;        strengthDiv.style.display = 'block';&#10;&#10;        let strength = 0;&#10;        let feedback = '';&#10;&#10;        // Length check&#10;        if (password.length &gt;= 8) strength++;&#10;        else feedback = 'At least 8 characters required';&#10;&#10;        // Uppercase check&#10;        if (/[A-Z]/.test(password)) strength++;&#10;&#10;        // Lowercase check&#10;        if (/[a-z]/.test(password)) strength++;&#10;&#10;        // Number check&#10;        if (/\d/.test(password)) strength++;&#10;&#10;        // Special character check&#10;        if (/[!@#$%^&amp;*(),.?&quot;:{}|&lt;&gt;]/.test(password)) strength++;&#10;&#10;        // Remove all strength classes&#10;        strengthFill.className = 'strength-fill';&#10;&#10;        if (strength &lt;= 2) {&#10;            strengthFill.classList.add('strength-weak');&#10;            strengthText.textContent = feedback || 'Weak password';&#10;            strengthText.style.color = 'var(--danger-color)';&#10;        } else if (strength === 3) {&#10;            strengthFill.classList.add('strength-fair');&#10;            strengthText.textContent = 'Fair password';&#10;            strengthText.style.color = 'var(--warning-color)';&#10;        } else if (strength === 4) {&#10;            strengthFill.classList.add('strength-good');&#10;            strengthText.textContent = 'Good password';&#10;            strengthText.style.color = 'var(--info-color)';&#10;        } else {&#10;            strengthFill.classList.add('strength-strong');&#10;            strengthText.textContent = 'Strong password';&#10;            strengthText.style.color = 'var(--success-color)';&#10;        }&#10;    });&#10;&#10;    // Form validation&#10;    document.querySelector('form').addEventListener('submit', function(e) {&#10;        const newPassword = document.getElementById('new_password').value;&#10;        const confirmPassword = document.getElementById('confirm_password').value;&#10;        const currentPassword = document.getElementById('current_password').value;&#10;&#10;        // Password validation&#10;        if (newPassword || confirmPassword || currentPassword) {&#10;            if (!currentPassword) {&#10;                e.preventDefault();&#10;                alert('Please enter your current password to change it.');&#10;                document.getElementById('current_password').focus();&#10;                return;&#10;            }&#10;&#10;            if (newPassword !== confirmPassword) {&#10;                e.preventDefault();&#10;                alert('New passwords do not match!');&#10;                document.getElementById('confirm_password').focus();&#10;                return;&#10;            }&#10;&#10;            if (newPassword.length &lt; 6) {&#10;                e.preventDefault();&#10;                alert('New password must be at least 6 characters long!');&#10;                document.getElementById('new_password').focus();&#10;                return;&#10;            }&#10;        }&#10;&#10;        // Phone number validation&#10;        const phoneNo = document.getElementById('phone_no').value;&#10;        if (phoneNo &amp;&amp; !/^\d{10}$/.test(phoneNo)) {&#10;            e.preventDefault();&#10;            alert('Phone number must be exactly 10 digits!');&#10;            document.getElementById('phone_no').focus();&#10;            return;&#10;        }&#10;&#10;        // Show loading state&#10;        const submitBtn = this.querySelector('button[type=&quot;submit&quot;]');&#10;        const originalText = submitBtn.innerHTML;&#10;        submitBtn.innerHTML = '&lt;i class=&quot;fas fa-spinner fa-spin&quot;&gt;&lt;/i&gt; Saving...';&#10;        submitBtn.disabled = true;&#10;&#10;        // Re-enable button after a delay in case of validation errors&#10;        setTimeout(() =&gt; {&#10;            submitBtn.innerHTML = originalText;&#10;            submitBtn.disabled = false;&#10;        }, 5000);&#10;    });&#10;&#10;    // Auto-save draft functionality (optional)&#10;    let saveTimeout;&#10;    document.querySelectorAll('.form-control').forEach(input =&gt; {&#10;        if (input.type !== 'password' &amp;&amp; input.type !== 'file') {&#10;            input.addEventListener('input', function() {&#10;                clearTimeout(saveTimeout);&#10;                saveTimeout = setTimeout(() =&gt; {&#10;                    // Save to localStorage as draft&#10;                    const formData = {};&#10;                    document.querySelectorAll('.form-control').forEach(field =&gt; {&#10;                        if (field.type !== 'password' &amp;&amp; field.type !== 'file' &amp;&amp; field.name) {&#10;                            formData[field.name] = field.value;&#10;                        }&#10;                    });&#10;                    localStorage.setItem('profile_draft', JSON.stringify(formData));&#10;                }, 1000);&#10;            });&#10;        }&#10;    });&#10;&#10;    // Load draft on page load (optional)&#10;    window.addEventListener('load', function() {&#10;        const draft = localStorage.getItem('profile_draft');&#10;        if (draft) {&#10;            try {&#10;                const formData = JSON.parse(draft);&#10;                Object.keys(formData).forEach(key =&gt; {&#10;                    const field = document.querySelector(`[name=&quot;${key}&quot;]`);&#10;                    if (field &amp;&amp; field.type !== 'password' &amp;&amp; field.type !== 'file') {&#10;                        if (!field.value) { // Only fill if field is empty&#10;                            field.value = formData[key];&#10;                        }&#10;                    }&#10;                });&#10;            } catch (e) {&#10;                console.error('Error loading draft:', e);&#10;            }&#10;        }&#10;    });&#10;&#10;    // Clear draft on successful submission&#10;    document.querySelector('form').addEventListener('submit', function() {&#10;        localStorage.removeItem('profile_draft');&#10;    });&#10;&#10;    // File size validation&#10;    document.getElementById('user_image').addEventListener('change', function() {&#10;        const file = this.files[0];&#10;        if (file) {&#10;            const maxSize = 5 * 1024 * 1024; // 5MB&#10;            if (file.size &gt; maxSize) {&#10;                alert('File size must be less than 5MB');&#10;                this.value = '';&#10;                return;&#10;            }&#10;&#10;            const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif'];&#10;            if (!allowedTypes.includes(file.type)) {&#10;                alert('Only JPG, PNG, and GIF files are allowed');&#10;                this.value = '';&#10;                return;&#10;            }&#10;        }&#10;    });&#10;&lt;/script&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;&lt;" />
              <option name="updatedContent" value="&lt;?php&#10;session_start();&#10;include '../Login/Login/db.php';&#10;&#10;// Check if user is logged in&#10;if (!isset($_SESSION['user_id'])) {&#10;    header(&quot;Location: ../Login/Login/login.php&quot;);&#10;    exit();&#10;}&#10;&#10;// Get user information&#10;$user_id = $_SESSION['user_id'];&#10;$query = &quot;SELECT * FROM register WHERE id = ?&quot;;&#10;$stmt = $conn-&gt;prepare($query);&#10;$stmt-&gt;bind_param(&quot;i&quot;, $user_id);&#10;$stmt-&gt;execute();&#10;$result = $stmt-&gt;get_result();&#10;$user = $result-&gt;fetch_assoc();&#10;&#10;$errors = [];&#10;$success = '';&#10;&#10;// Handle form submission&#10;if ($_SERVER['REQUEST_METHOD'] === 'POST') {&#10;    $name = trim($_POST['name']);&#10;    $email = trim($_POST['email']);&#10;    $phone_no = trim($_POST['phone_no']);&#10;    $about = trim($_POST['about']);&#10;    $department = trim($_POST['department']);&#10;    $passout_year = trim($_POST['passout_year']);&#10;    $current_password = $_POST['current_password'] ?? '';&#10;    $new_password = $_POST['new_password'] ?? '';&#10;    $confirm_password = $_POST['confirm_password'] ?? '';&#10;&#10;    // Validation&#10;    if (empty($name)) {&#10;        $errors[] = &quot;Name is required&quot;;&#10;    }&#10;    &#10;    if (empty($email) || !filter_var($email, FILTER_VALIDATE_EMAIL)) {&#10;        $errors[] = &quot;Valid email is required&quot;;&#10;    }&#10;&#10;    if (!empty($phone_no) &amp;&amp; !preg_match('/^[0-9]{10}$/', $phone_no)) {&#10;        $errors[] = &quot;Phone number must be 10 digits&quot;;&#10;    }&#10;&#10;    // Check email uniqueness&#10;    if (!empty($email) &amp;&amp; $email !== $user['email']) {&#10;        $email_check = &quot;SELECT id FROM register WHERE email = ? AND id != ?&quot;;&#10;        $email_stmt = $conn-&gt;prepare($email_check);&#10;        $email_stmt-&gt;bind_param(&quot;si&quot;, $email, $user_id);&#10;        $email_stmt-&gt;execute();&#10;        if ($email_stmt-&gt;get_result()-&gt;num_rows &gt; 0) {&#10;            $errors[] = &quot;Email is already registered&quot;;&#10;        }&#10;        $email_stmt-&gt;close();&#10;    }&#10;&#10;    // Handle profile picture upload&#10;    if (isset($_FILES['user_image']) &amp;&amp; $_FILES['user_image']['error'] === 0) {&#10;        $allowed = ['jpg', 'jpeg', 'png', 'gif'];&#10;        $filename = $_FILES['user_image']['name'];&#10;        $filetype = strtolower(pathinfo($filename, PATHINFO_EXTENSION));&#10;        &#10;        if (!in_array($filetype, $allowed)) {&#10;            $errors[] = &quot;Only JPG, JPEG, PNG, and GIF files are allowed&quot;;&#10;        } else {&#10;            $maxsize = 5 * 1024 * 1024; // 5MB&#10;            if ($_FILES['user_image']['size'] &gt; $maxsize) {&#10;                $errors[] = &quot;File size must be less than 5MB&quot;;&#10;            } else {&#10;                $upload_dir = 'forms/uploads/images/';&#10;                if (!is_dir($upload_dir)) {&#10;                    mkdir($upload_dir, 0777, true);&#10;                }&#10;                &#10;                $new_filename = 'profile_' . $user_id . '_' . time() . '.' . $filetype;&#10;                $upload_path = $upload_dir . $new_filename;&#10;                &#10;                if (!move_uploaded_file($_FILES['user_image']['tmp_name'], $upload_path)) {&#10;                    $errors[] = &quot;Failed to upload profile picture&quot;;&#10;                }&#10;            }&#10;        }&#10;    }&#10;&#10;    // Handle password change&#10;    if (!empty($new_password) || !empty($confirm_password) || !empty($current_password)) {&#10;        if (empty($current_password)) {&#10;            $errors[] = &quot;Current password is required to change password&quot;;&#10;        } elseif ($new_password !== $confirm_password) {&#10;            $errors[] = &quot;New passwords do not match&quot;;&#10;        } elseif (strlen($new_password) &lt; 6) {&#10;            $errors[] = &quot;New password must be at least 6 characters long&quot;;&#10;        } else {&#10;            if (!password_verify($current_password, $user['password'])) {&#10;                $errors[] = &quot;Current password is incorrect&quot;;&#10;            }&#10;        }&#10;    }&#10;&#10;    // Update database if no errors&#10;    if (empty($errors)) {&#10;        $update_fields = [];&#10;        $types = '';&#10;        $params = [];&#10;&#10;        // Basic info updates&#10;        if (!empty($name)) {&#10;            $update_fields[] = &quot;name = ?&quot;;&#10;            $types .= &quot;s&quot;;&#10;            $params[] = $name;&#10;        }&#10;        if (!empty($email)) {&#10;            $update_fields[] = &quot;email = ?&quot;;&#10;            $types .= &quot;s&quot;;&#10;            $params[] = $email;&#10;        }&#10;        if (!empty($phone_no)) {&#10;            $update_fields[] = &quot;phone_no = ?&quot;;&#10;            $types .= &quot;s&quot;;&#10;            $params[] = $phone_no;&#10;        }&#10;        if (!empty($about)) {&#10;            $update_fields[] = &quot;about = ?&quot;;&#10;            $types .= &quot;s&quot;;&#10;            $params[] = $about;&#10;        }&#10;        if (!empty($department)) {&#10;            $update_fields[] = &quot;department = ?&quot;;&#10;            $types .= &quot;s&quot;;&#10;            $params[] = $department;&#10;        }&#10;        if (!empty($passout_year)) {&#10;            $update_fields[] = &quot;passout_year = ?&quot;;&#10;            $types .= &quot;s&quot;;&#10;            $params[] = $passout_year;&#10;        }&#10;&#10;        // Password update&#10;        if (!empty($new_password) &amp;&amp; password_verify($current_password, $user['password'])) {&#10;            $update_fields[] = &quot;password = ?&quot;;&#10;            $types .= &quot;s&quot;;&#10;            $params[] = password_hash($new_password, PASSWORD_DEFAULT);&#10;        }&#10;&#10;        // Profile picture update&#10;        if (isset($new_filename)) {&#10;            $update_fields[] = &quot;user_image = ?&quot;;&#10;            $types .= &quot;s&quot;;&#10;            $params[] = $new_filename;&#10;        }&#10;&#10;        if (!empty($update_fields)) {&#10;            $params[] = $user_id;&#10;            $types .= &quot;i&quot;;&#10;            &#10;            $sql = &quot;UPDATE register SET &quot; . implode(&quot;, &quot;, $update_fields) . &quot; WHERE id = ?&quot;;&#10;            $stmt = $conn-&gt;prepare($sql);&#10;            &#10;            // Bind parameters dynamically&#10;            $stmt-&gt;bind_param($types, ...$params);&#10;            &#10;            if ($stmt-&gt;execute()) {&#10;                $success = &quot;Profile updated successfully&quot;;&#10;                &#10;                // Refresh user data&#10;                $stmt = $conn-&gt;prepare($query);&#10;                $stmt-&gt;bind_param(&quot;i&quot;, $user_id);&#10;                $stmt-&gt;execute();&#10;                $result = $stmt-&gt;get_result();&#10;                $user = $result-&gt;fetch_assoc();&#10;                &#10;                $_SESSION['user_name'] = $user['name'];&#10;            } else {&#10;                $errors[] = &quot;Error updating profile: &quot; . $conn-&gt;error;&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;// Get statistics&#10;$project_count = 0;&#10;$idea_count = 0;&#10;&#10;$project_query = &quot;SELECT COUNT(*) as count FROM projects WHERE user_id = ?&quot;;&#10;if ($stmt = $conn-&gt;prepare($project_query)) {&#10;    $stmt-&gt;bind_param(&quot;i&quot;, $user_id);&#10;    $stmt-&gt;execute();&#10;    $project_count = $stmt-&gt;get_result()-&gt;fetch_assoc()['count'];&#10;    $stmt-&gt;close();&#10;}&#10;&#10;$idea_query = &quot;SELECT COUNT(*) as count FROM blog WHERE er_number = ?&quot;;&#10;if ($stmt = $conn-&gt;prepare($idea_query)) {&#10;    $stmt-&gt;bind_param(&quot;s&quot;, $user['enrollment_number']);&#10;    $stmt-&gt;execute();&#10;    $idea_count = $stmt-&gt;get_result()-&gt;fetch_assoc()['count'];&#10;    $stmt-&gt;close();&#10;}&#10;?&gt;&#10;&#10;&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;en&quot;&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot;&gt;&#10;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;&#10;    &lt;title&gt;Profile Settings - IdeaNest&lt;/title&gt;&#10;    &lt;link href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot; rel=&quot;stylesheet&quot;&gt;&#10;    &lt;style&gt;&#10;        :root {&#10;            --primary-color: #6366f1;&#10;            --secondary-color: #8b5cf6;&#10;            --success-color: #10b981;&#10;            --danger-color: #ef4444;&#10;            --warning-color: #f59e0b;&#10;            --info-color: #3b82f6;&#10;            --dark-color: #1f2937;&#10;            --light-color: #f8fafc;&#10;            --white: #ffffff;&#10;            --gray-50: #f9fafb;&#10;            --gray-100: #f3f4f6;&#10;            --gray-200: #e5e7eb;&#10;            --gray-300: #d1d5db;&#10;            --gray-400: #9ca3af;&#10;            --gray-500: #6b7280;&#10;            --gray-600: #4b5563;&#10;            --gray-700: #374151;&#10;            --gray-800: #1f2937;&#10;            --gray-900: #111827;&#10;            --border-radius: 12px;&#10;            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);&#10;            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);&#10;            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);&#10;            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);&#10;            --sidebar-width: 280px;&#10;        }&#10;&#10;        * {&#10;            margin: 0;&#10;            padding: 0;&#10;            box-sizing: border-box;&#10;        }&#10;&#10;        body {&#10;            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;&#10;            background: linear-gradient(135deg, var(--gray-50) 0%, var(--gray-100) 100%);&#10;            color: var(--gray-800);&#10;            line-height: 1.6;&#10;            min-height: 100vh;&#10;        }&#10;&#10;        .main-content {&#10;            margin-left: var(--sidebar-width);&#10;            padding: 2rem;&#10;            min-height: 100vh;&#10;            transition: margin-left 0.3s ease;&#10;        }&#10;&#10;        @media (max-width: 1024px) {&#10;            .main-content {&#10;                margin-left: 0;&#10;                padding: 1rem;&#10;                padding-top: 80px;&#10;            }&#10;        }&#10;&#10;        .settings-container {&#10;            max-width: 1000px;&#10;            margin: 0 auto;&#10;            background: var(--white);&#10;            border-radius: var(--border-radius);&#10;            box-shadow: var(--shadow-xl);&#10;            overflow: hidden;&#10;        }&#10;&#10;        .settings-header {&#10;            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));&#10;            color: var(--white);&#10;            padding: 2rem;&#10;            text-align: center;&#10;        }&#10;&#10;        .settings-header h1 {&#10;            font-size: 2rem;&#10;            margin-bottom: 0.5rem;&#10;            font-weight: 700;&#10;        }&#10;&#10;        .settings-header p {&#10;            opacity: 0.9;&#10;            font-size: 1.1rem;&#10;        }&#10;&#10;        .profile-section {&#10;            padding: 2rem;&#10;            border-bottom: 1px solid var(--gray-200);&#10;            background: var(--gray-50);&#10;        }&#10;&#10;        .profile-header {&#10;            display: flex;&#10;            align-items: center;&#10;            gap: 2rem;&#10;            margin-bottom: 2rem;&#10;        }&#10;&#10;        .profile-picture-wrapper {&#10;            position: relative;&#10;        }&#10;&#10;        .profile-picture {&#10;            width: 120px;&#10;            height: 120px;&#10;            border-radius: 50%;&#10;            object-fit: cover;&#10;            border: 4px solid var(--white);&#10;            box-shadow: var(--shadow-lg);&#10;            transition: transform 0.3s ease;&#10;        }&#10;&#10;        .profile-picture:hover {&#10;            transform: scale(1.05);&#10;        }&#10;&#10;        .profile-info h2 {&#10;            margin: 0;&#10;            font-size: 1.8rem;&#10;            color: var(--gray-800);&#10;            font-weight: 700;&#10;        }&#10;&#10;        .profile-info p {&#10;            margin: 0.5rem 0 0;&#10;            color: var(--gray-600);&#10;            font-size: 1.1rem;&#10;        }&#10;&#10;        .profile-stats {&#10;            display: grid;&#10;            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));&#10;            gap: 1rem;&#10;            margin-top: 1rem;&#10;        }&#10;&#10;        .stat-item {&#10;            background: var(--white);&#10;            padding: 1rem;&#10;            border-radius: var(--border-radius);&#10;            text-align: center;&#10;            box-shadow: var(--shadow-sm);&#10;        }&#10;&#10;        .stat-number {&#10;            font-size: 1.5rem;&#10;            font-weight: 700;&#10;            color: var(--primary-color);&#10;        }&#10;&#10;        .stat-label {&#10;            color: var(--gray-600);&#10;            font-size: 0.9rem;&#10;            margin-top: 0.25rem;&#10;        }&#10;&#10;        .settings-form {&#10;            padding: 2rem;&#10;        }&#10;&#10;        .form-section {&#10;            margin-bottom: 2.5rem;&#10;        }&#10;&#10;        .section-title {&#10;            font-size: 1.4rem;&#10;            color: var(--gray-800);&#10;            margin-bottom: 1.5rem;&#10;            font-weight: 600;&#10;            display: flex;&#10;            align-items: center;&#10;            gap: 0.5rem;&#10;        }&#10;&#10;        .section-title i {&#10;            color: var(--primary-color);&#10;        }&#10;&#10;        .form-grid {&#10;            display: grid;&#10;            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));&#10;            gap: 1.5rem;&#10;        }&#10;&#10;        .form-group {&#10;            margin-bottom: 1.5rem;&#10;        }&#10;&#10;        .form-group.full-width {&#10;            grid-column: 1 / -1;&#10;        }&#10;&#10;        .form-label {&#10;            display: block;&#10;            margin-bottom: 0.5rem;&#10;            font-weight: 600;&#10;            color: var(--gray-700);&#10;            font-size: 0.95rem;&#10;        }&#10;&#10;        .form-control {&#10;            width: 100%;&#10;            padding: 0.875rem;&#10;            border: 2px solid var(--gray-300);&#10;            border-radius: var(--border-radius);&#10;            font-size: 1rem;&#10;            transition: all 0.3s ease;&#10;            background: var(--white);&#10;        }&#10;&#10;        .form-control:focus {&#10;            outline: none;&#10;            border-color: var(--primary-color);&#10;            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);&#10;            transform: translateY(-1px);&#10;        }&#10;&#10;        .form-control:hover {&#10;            border-color: var(--gray-400);&#10;        }&#10;&#10;        textarea.form-control {&#10;            resize: vertical;&#10;            min-height: 120px;&#10;        }&#10;&#10;        .upload-section {&#10;            border: 2px dashed var(--gray-300);&#10;            border-radius: var(--border-radius);&#10;            padding: 2rem;&#10;            text-align: center;&#10;            transition: all 0.3s ease;&#10;            cursor: pointer;&#10;        }&#10;&#10;        .upload-section:hover {&#10;            border-color: var(--primary-color);&#10;            background: rgba(99, 102, 241, 0.05);&#10;        }&#10;&#10;        .upload-section.dragover {&#10;            border-color: var(--primary-color);&#10;            background: rgba(99, 102, 241, 0.1);&#10;        }&#10;&#10;        .upload-icon {&#10;            font-size: 2rem;&#10;            color: var(--gray-400);&#10;            margin-bottom: 1rem;&#10;        }&#10;&#10;        .upload-text {&#10;            color: var(--gray-600);&#10;            margin-bottom: 1rem;&#10;        }&#10;&#10;        .upload-btn {&#10;            display: inline-block;&#10;            padding: 0.75rem 1.5rem;&#10;            background: var(--primary-color);&#10;            color: var(--white);&#10;            border: none;&#10;            border-radius: var(--border-radius);&#10;            cursor: pointer;&#10;            transition: all 0.3s ease;&#10;            font-weight: 600;&#10;        }&#10;&#10;        .upload-btn:hover {&#10;            background: var(--secondary-color);&#10;            transform: translateY(-2px);&#10;            box-shadow: var(--shadow-lg);&#10;        }&#10;&#10;        .upload-btn input[type=&quot;file&quot;] {&#10;            display: none;&#10;        }&#10;&#10;        .alert {&#10;            padding: 1rem 1.25rem;&#10;            border-radius: var(--border-radius);&#10;            margin-bottom: 1.5rem;&#10;            border: 1px solid transparent;&#10;            font-weight: 500;&#10;        }&#10;&#10;        .alert-success {&#10;            background: rgba(16, 185, 129, 0.1);&#10;            color: var(--success-color);&#10;            border-color: rgba(16, 185, 129, 0.2);&#10;        }&#10;&#10;        .alert-error {&#10;            background: rgba(239, 68, 68, 0.1);&#10;            color: var(--danger-color);&#10;            border-color: rgba(239, 68, 68, 0.2);&#10;        }&#10;&#10;        .alert-info {&#10;            background: rgba(59, 130, 246, 0.1);&#10;            color: var(--info-color);&#10;            border-color: rgba(59, 130, 246, 0.2);&#10;        }&#10;&#10;        .btn {&#10;            display: inline-flex;&#10;            align-items: center;&#10;            gap: 0.5rem;&#10;            padding: 0.875rem 1.75rem;&#10;            border: none;&#10;            border-radius: var(--border-radius);&#10;            font-weight: 600;&#10;            cursor: pointer;&#10;            transition: all 0.3s ease;&#10;            text-decoration: none;&#10;            font-size: 1rem;&#10;        }&#10;&#10;        .btn-primary {&#10;            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));&#10;            color: var(--white);&#10;        }&#10;&#10;        .btn-primary:hover {&#10;            transform: translateY(-2px);&#10;            box-shadow: var(--shadow-lg);&#10;        }&#10;&#10;        .btn-secondary {&#10;            background: var(--gray-600);&#10;            color: var(--white);&#10;        }&#10;&#10;        .btn-secondary:hover {&#10;            background: var(--gray-700);&#10;            transform: translateY(-2px);&#10;            box-shadow: var(--shadow-lg);&#10;        }&#10;&#10;        .form-actions {&#10;            display: flex;&#10;            gap: 1rem;&#10;            justify-content: flex-end;&#10;            margin-top: 2rem;&#10;            padding-top: 2rem;&#10;            border-top: 1px solid var(--gray-200);&#10;        }&#10;&#10;        .password-strength {&#10;            margin-top: 0.5rem;&#10;            font-size: 0.85rem;&#10;        }&#10;&#10;        .strength-bar {&#10;            height: 4px;&#10;            background: var(--gray-200);&#10;            border-radius: 2px;&#10;            margin-top: 0.25rem;&#10;            overflow: hidden;&#10;        }&#10;&#10;        .strength-fill {&#10;            height: 100%;&#10;            transition: width 0.3s ease;&#10;        }&#10;&#10;        .strength-weak { background: var(--danger-color); width: 25%; }&#10;        .strength-fair { background: var(--warning-color); width: 50%; }&#10;        .strength-good { background: var(--info-color); width: 75%; }&#10;        .strength-strong { background: var(--success-color); width: 100%; }&#10;&#10;        .input-group {&#10;            position: relative;&#10;        }&#10;&#10;        .input-group-icon {&#10;            position: absolute;&#10;            left: 1rem;&#10;            top: 50%;&#10;            transform: translateY(-50%);&#10;            color: var(--gray-400);&#10;            pointer-events: none;&#10;        }&#10;&#10;        .input-group .form-control {&#10;            padding-left: 2.75rem;&#10;        }&#10;&#10;        .toggle-password {&#10;            position: absolute;&#10;            right: 1rem;&#10;            top: 50%;&#10;            transform: translateY(-50%);&#10;            background: none;&#10;            border: none;&#10;            color: var(--gray-400);&#10;            cursor: pointer;&#10;            font-size: 1.1rem;&#10;        }&#10;&#10;        .toggle-password:hover {&#10;            color: var(--gray-600);&#10;        }&#10;&#10;        @media (max-width: 768px) {&#10;            .profile-header {&#10;                flex-direction: column;&#10;                text-align: center;&#10;                gap: 1rem;&#10;            }&#10;&#10;            .form-grid {&#10;                grid-template-columns: 1fr;&#10;            }&#10;&#10;            .form-actions {&#10;                flex-direction: column;&#10;            }&#10;&#10;            .settings-header {&#10;                padding: 1.5rem;&#10;            }&#10;&#10;            .settings-form {&#10;                padding: 1.5rem;&#10;            }&#10;&#10;            .profile-section {&#10;                padding: 1.5rem;&#10;            }&#10;        }&#10;    &lt;/style&gt;&#10;&lt;/head&gt;&#10;&lt;body&gt;&#10;    &lt;?php include 'layout.php'; ?&gt;&#10;    &#10;    &lt;div class=&quot;main-content&quot;&gt;&#10;        &lt;div class=&quot;settings-container&quot;&gt;&#10;            &lt;div class=&quot;settings-header&quot;&gt;&#10;                &lt;h1&gt;&lt;i class=&quot;fas fa-user-cog&quot;&gt;&lt;/i&gt; Profile Settings&lt;/h1&gt;&#10;                &lt;p&gt;Manage your account information and preferences&lt;/p&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;?php if (!empty($errors)): ?&gt;&#10;                &lt;div class=&quot;alert alert-error&quot;&gt;&#10;                    &lt;i class=&quot;fas fa-exclamation-circle&quot;&gt;&lt;/i&gt;&#10;                    &lt;ul&gt;&#10;                        &lt;?php foreach ($errors as $error): ?&gt;&#10;                            &lt;li&gt;&lt;?php echo htmlspecialchars($error); ?&gt;&lt;/li&gt;&#10;                        &lt;?php endforeach; ?&gt;&#10;                    &lt;/ul&gt;&#10;                &lt;/div&gt;&#10;            &lt;?php endif; ?&gt;&#10;&#10;            &lt;?php if (!empty($success)): ?&gt;&#10;                &lt;div class=&quot;alert alert-success&quot;&gt;&#10;                    &lt;i class=&quot;fas fa-check-circle&quot;&gt;&lt;/i&gt;&#10;                    &lt;?php echo htmlspecialchars($success); ?&gt;&#10;                &lt;/div&gt;&#10;            &lt;?php endif; ?&gt;&#10;&#10;            &lt;form action=&quot;&quot; method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot; class=&quot;settings-form&quot;&gt;&#10;                &lt;!-- Profile Picture Section --&gt;&#10;                &lt;div class=&quot;form-section&quot;&gt;&#10;                    &lt;h3 class=&quot;section-title&quot;&gt;&lt;i class=&quot;fas fa-user-circle&quot;&gt;&lt;/i&gt; Profile Picture&lt;/h3&gt;&#10;                    &lt;div class=&quot;profile-picture-container&quot;&gt;&#10;                        &lt;img src=&quot;&lt;?php echo !empty($user['user_image']) ? 'forms/uploads/images/' . htmlspecialchars($user['user_image']) : 'https://via.placeholder.com/150'; ?&gt;&quot;&#10;                             alt=&quot;Profile Picture&quot; id=&quot;profilePreview&quot; class=&quot;profile-picture&quot;&gt;&#10;                        &lt;div class=&quot;upload-section&quot;&gt;&#10;                            &lt;input type=&quot;file&quot; name=&quot;user_image&quot; id=&quot;user_image&quot; accept=&quot;image/*&quot;&gt;&#10;                            &lt;p&gt;Click to upload or drag and drop&lt;br&gt;JPG, PNG or GIF (max. 5MB)&lt;/p&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;!-- Personal Information Section --&gt;&#10;                &lt;div class=&quot;form-section&quot;&gt;&#10;                    &lt;h3 class=&quot;section-title&quot;&gt;&lt;i class=&quot;fas fa-user&quot;&gt;&lt;/i&gt; Personal Information&lt;/h3&gt;&#10;                    &lt;div class=&quot;form-grid&quot;&gt;&#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label for=&quot;name&quot;&gt;Full Name *&lt;/label&gt;&#10;                            &lt;input type=&quot;text&quot; id=&quot;name&quot; name=&quot;name&quot; value=&quot;&lt;?php echo htmlspecialchars($user['name']); ?&gt;&quot; required&gt;&#10;                        &lt;/div&gt;&#10;                        &#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label for=&quot;email&quot;&gt;Email *&lt;/label&gt;&#10;                            &lt;input type=&quot;email&quot; id=&quot;email&quot; name=&quot;email&quot; value=&quot;&lt;?php echo htmlspecialchars($user['email']); ?&gt;&quot; required&gt;&#10;                        &lt;/div&gt;&#10;                        &#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label for=&quot;phone_no&quot;&gt;Phone Number&lt;/label&gt;&#10;                            &lt;input type=&quot;tel&quot; id=&quot;phone_no&quot; name=&quot;phone_no&quot; value=&quot;&lt;?php echo htmlspecialchars($user['phone_no'] ?? ''); ?&gt;&quot;&#10;                                   pattern=&quot;[0-9]{10}&quot; title=&quot;Please enter a valid 10-digit phone number&quot;&gt;&#10;                        &lt;/div&gt;&#10;                        &#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label for=&quot;department&quot;&gt;Department&lt;/label&gt;&#10;                            &lt;select id=&quot;department&quot; name=&quot;department&quot;&gt;&#10;                                &lt;option value=&quot;&quot;&gt;Select Department&lt;/option&gt;&#10;                                &lt;?php&#10;                                $departments = ['ICT', 'CSE', 'ECE', 'Mechanical', 'Civil', 'Electrical'];&#10;                                foreach ($departments as $dept) {&#10;                                    $selected = (strtolower($user['department']) === strtolower($dept)) ? 'selected' : '';&#10;                                    echo &quot;&lt;option value='&quot; . strtolower($dept) . &quot;' $selected&gt;$dept&lt;/option&gt;&quot;;&#10;                                }&#10;                                ?&gt;&#10;                            &lt;/select&gt;&#10;                        &lt;/div&gt;&#10;                        &#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label for=&quot;passout_year&quot;&gt;Passout Year&lt;/label&gt;&#10;                            &lt;select id=&quot;passout_year&quot; name=&quot;passout_year&quot;&gt;&#10;                                &lt;option value=&quot;&quot;&gt;Select Year&lt;/option&gt;&#10;                                &lt;?php&#10;                                $current_year = date('Y');&#10;                                for ($year = $current_year; $year &lt;= $current_year + 4; $year++) {&#10;                                    $selected = ($user['passout_year'] == $year) ? 'selected' : '';&#10;                                    echo &quot;&lt;option value='$year' $selected&gt;$year&lt;/option&gt;&quot;;&#10;                                }&#10;                                ?&gt;&#10;                            &lt;/select&gt;&#10;                        &lt;/div&gt;&#10;                        &#10;                        &lt;div class=&quot;form-group full-width&quot;&gt;&#10;                            &lt;label for=&quot;about&quot;&gt;About Me&lt;/label&gt;&#10;                            &lt;textarea id=&quot;about&quot; name=&quot;about&quot; rows=&quot;4&quot;&gt;&lt;?php echo htmlspecialchars($user['about'] ?? ''); ?&gt;&lt;/textarea&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;!-- Password Change Section --&gt;&#10;                &lt;div class=&quot;form-section&quot;&gt;&#10;                    &lt;h3 class=&quot;section-title&quot;&gt;&lt;i class=&quot;fas fa-lock&quot;&gt;&lt;/i&gt; Change Password&lt;/h3&gt;&#10;                    &lt;div class=&quot;form-grid&quot;&gt;&#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label for=&quot;current_password&quot;&gt;Current Password&lt;/label&gt;&#10;                            &lt;input type=&quot;password&quot; id=&quot;current_password&quot; name=&quot;current_password&quot;&gt;&#10;                        &lt;/div&gt;&#10;                        &#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label for=&quot;new_password&quot;&gt;New Password&lt;/label&gt;&#10;                            &lt;input type=&quot;password&quot; id=&quot;new_password&quot; name=&quot;new_password&quot;&gt;&#10;                            &lt;div id=&quot;password-strength&quot;&gt;&lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                        &#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label for=&quot;confirm_password&quot;&gt;Confirm New Password&lt;/label&gt;&#10;                            &lt;input type=&quot;password&quot; id=&quot;confirm_password&quot; name=&quot;confirm_password&quot;&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;!-- Statistics Section --&gt;&#10;                &lt;div class=&quot;form-section&quot;&gt;&#10;                    &lt;h3 class=&quot;section-title&quot;&gt;&lt;i class=&quot;fas fa-chart-bar&quot;&gt;&lt;/i&gt; Your Activity&lt;/h3&gt;&#10;                    &lt;div class=&quot;stats-grid&quot;&gt;&#10;                        &lt;div class=&quot;stat-card&quot;&gt;&#10;                            &lt;span class=&quot;stat-number&quot;&gt;&lt;?php echo $project_count; ?&gt;&lt;/span&gt;&#10;                            &lt;span class=&quot;stat-label&quot;&gt;Projects&lt;/span&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;stat-card&quot;&gt;&#10;                            &lt;span class=&quot;stat-number&quot;&gt;&lt;?php echo $idea_count; ?&gt;&lt;/span&gt;&#10;                            &lt;span class=&quot;stat-label&quot;&gt;Ideas&lt;/span&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div class=&quot;form-actions&quot;&gt;&#10;                    &lt;button type=&quot;reset&quot; class=&quot;btn btn-secondary&quot;&gt;Reset Changes&lt;/button&gt;&#10;                    &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;Save Changes&lt;/button&gt;&#10;                &lt;/div&gt;&#10;            &lt;/form&gt;&#10;        &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;script&gt;&#10;        // Profile picture preview&#10;        document.getElementById('user_image').addEventListener('change', function(e) {&#10;            const file = e.target.files[0];&#10;            if (file) {&#10;                const reader = new FileReader();&#10;                reader.onload = function(e) {&#10;                    document.getElementById('profilePreview').src = e.target.result;&#10;                }&#10;                reader.readAsDataURL(file);&#10;            }&#10;        });&#10;&#10;        // Password strength checker&#10;        document.getElementById('new_password').addEventListener('input', function() {&#10;            const password = this.value;&#10;            const strengthDiv = document.getElementById('password-strength');&#10;            let strength = 0;&#10;            let message = '';&#10;&#10;            if (password.length &gt;= 8) strength++;&#10;            if (/[A-Z]/.test(password)) strength++;&#10;            if (/[a-z]/.test(password)) strength++;&#10;            if (/[0-9]/.test(password)) strength++;&#10;            if (/[^A-Za-z0-9]/.test(password)) strength++;&#10;&#10;            switch (strength) {&#10;                case 0:&#10;                case 1:&#10;                    message = '&lt;span class=&quot;weak&quot;&gt;Weak Password&lt;/span&gt;';&#10;                    break;&#10;                case 2:&#10;                    message = '&lt;span class=&quot;fair&quot;&gt;Fair Password&lt;/span&gt;';&#10;                    break;&#10;                case 3:&#10;                    message = '&lt;span class=&quot;good&quot;&gt;Good Password&lt;/span&gt;';&#10;                    break;&#10;                case 4:&#10;                case 5:&#10;                    message = '&lt;span class=&quot;strong&quot;&gt;Strong Password&lt;/span&gt;';&#10;                    break;&#10;            }&#10;&#10;            strengthDiv.innerHTML = message;&#10;        });&#10;&#10;        // Form validation&#10;        document.querySelector('form').addEventListener('submit', function(e) {&#10;            const newPassword = document.getElementById('new_password').value;&#10;            const confirmPassword = document.getElementById('confirm_password').value;&#10;            const currentPassword = document.getElementById('current_password').value;&#10;&#10;            if (newPassword || confirmPassword || currentPassword) {&#10;                if (!currentPassword) {&#10;                    e.preventDefault();&#10;                    alert('Please enter your current password to change it.');&#10;                    return;&#10;                }&#10;                if (newPassword !== confirmPassword) {&#10;                    e.preventDefault();&#10;                    alert('New passwords do not match!');&#10;                    return;&#10;                }&#10;            }&#10;&#10;            const phoneNo = document.getElementById('phone_no').value;&#10;            if (phoneNo &amp;&amp; !/^\d{10}$/.test(phoneNo)) {&#10;                e.preventDefault();&#10;                alert('Phone number must be exactly 10 digits!');&#10;                return;&#10;            }&#10;        });&#10;    &lt;/script&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>